<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MTB CAT1 Peripheral driver library: CTB     (Continuous Time Block)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="IFXCYP_one-line.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MTB CAT1 Peripheral driver library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__autanalog__ctb.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">CTB (Continuous Time Block)<div class="ingroups"><a class="el" href="group__group__autanalog.html">AUTONOMOUS ANALOG (Autonomous Analog Block)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>This driver provides API functions to configure the CTB subsystem of the Autonomous Analog. </p>
<p>The CTB block provides operational amplifiers (Opamps) for use in continuous-time signal chains. Each CTB includes two identical Opamps marked OA0 and OA1, a switch matrix for input/output routing, and the resistor ladder for each Opamp gain setting.</p>
<p>The diagram below shows the CTB simplified internals.</p>
<p>For more information on the CTB, refer to the device Architecture Technical Reference Manual (TRM).<br />
For the exact location of the pins, see the device datasheet.</p>
<div class="image">
<img src="LPPASS_CTB_general.png" alt="LPPASS_CTB_general.png"/>
</div>
<h1><a class="anchor" id="group_autanalog_ctb_static"></a>
Static Configuration</h1>
<p>The static configuration contains application-specific settings intended to remain static for any Opamp application. The Autonomous Controller (AC) will NOT change the static configuration during operation.</p>
<p>The static configuration of the Opamp includes:</p><ul>
<li>Power mode;</li>
<li>Topology;</li>
<li>Interrupt mode (Comparator only);</li>
<li>Opamp compensation; For configuration settings, see <a class="el" href="structcy__stc__autanalog__ctb__sta__t.html">cy_stc_autanalog_ctb_sta_t</a>.</li>
</ul>
<p>The Opamp topology in the CTB can be configured as follows:</p><ul>
<li>Comparator (with or without hysteresis);</li>
<li>Programmable Gain Amplifier (PGA, inverting and non-inverting, ground and Vref referenced);</li>
<li>Trans-impedance Amplifier (TIA);</li>
<li>Opamp with open loop (Potentiostat);</li>
<li>Differential Amplifier (DiffAmp);</li>
<li>Buffer (Voltage follower).</li>
</ul>
<h1><a class="anchor" id="group_autanalog_ctb_dynamic"></a>
Dynamic Configuration and State Transition Table</h1>
<p>The dynamic configuration structure includes the Opamp settings, which can be modified by the Autonomous Controller (AC) during operation.</p>
<p>The Autonomous Controller is able to modify the following characteristics of the CTB in runtime per settings provided in the State Transition Table:</p><ul>
<li>Enable/Disable Opamp within the CTB;</li>
<li>Re-configure the switch matrix:<ul>
<li>change the connection of the non-inverting Opamp input to the pin or voltage reference;</li>
<li>change the connection of the inverting Opamp input to the pin or LNFE;</li>
<li>change the connection of the bottom end of the resistor ladder to the pin or voltage reference;</li>
<li>connect the pin to LNFE;</li>
</ul>
</li>
<li>Adjust the Opamps gain; For the configuration settings, see <a class="el" href="structcy__stc__autanalog__ctb__dyn__t.html">cy_stc_autanalog_ctb_dyn_t</a> and <a class="el" href="structcy__stc__autanalog__stt__ctb__t.html">cy_stc_autanalog_stt_ctb_t</a>.</li>
</ul>
<table class="doxtable">
<tr>
<th>Index </th><th>Gain </th><th>R-ladder, Ohm </th><th>Non-inv PGA </th><th>Inv PGA </th><th>DiffAmp </th><th>TIA  </th></tr>
<tr>
<td>0 </td><td>1.00 </td><td>Rin = 192k, Rfb = 0 </td><td>- </td><td>- </td><td>- </td><td>-  </td></tr>
<tr>
<td>1 </td><td>1.42 </td><td>Rin = 135k, Rfb = 57k </td><td>1.42 </td><td>0.42 </td><td>0.42 </td><td>Rfb = 57k  </td></tr>
<tr>
<td>2 </td><td>2.00 </td><td>Rin = 96k, Rfb = 96k </td><td>2.00 </td><td>1.00 </td><td>1.00 </td><td>Rfb = 96k  </td></tr>
<tr>
<td>3 </td><td>2.78 </td><td>Rin = 69k, Rfb = 123k </td><td>2.78 </td><td>1.78 </td><td>1.78 </td><td>Rfb = 123k  </td></tr>
<tr>
<td>4 </td><td>4.00 </td><td>Rin = 48k, Rfb = 144k </td><td>4.00 </td><td>3.00 </td><td>3.00 </td><td>Rfb = 144k  </td></tr>
<tr>
<td>5 </td><td>5.82 </td><td>Rin = 33k, Rfb = 159k </td><td>5.82 </td><td>4.82 </td><td>4.82 </td><td>Rfb = 159k  </td></tr>
<tr>
<td>6 </td><td>8.00 </td><td>Rin = 24k, Rfb = 168k </td><td>8.00 </td><td>7.00 </td><td>7.00 </td><td>Rfb = 168k  </td></tr>
<tr>
<td>7 </td><td>10.67 </td><td>Rin = 18k, Rfb = 174k </td><td>10.67 </td><td>9.67 </td><td>9.67 </td><td>Rfb = 174k  </td></tr>
<tr>
<td>8 </td><td>16.00 </td><td>Rin = 12k, Rfb = 180k </td><td>16.00 </td><td>15.00 </td><td>15.00 </td><td>Rfb = 180k  </td></tr>
<tr>
<td>9 </td><td>21.33 </td><td>Rin = 9k, Rfb = 183k </td><td>21.33 </td><td>20.33 </td><td>20.33 </td><td>Rfb = 183k  </td></tr>
<tr>
<td>10 </td><td>32.00 </td><td>Rin = 6k, Rfb = 186k </td><td>32.00 </td><td>31.00 </td><td>31.00 </td><td>Rfb = 186k  </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>For more information on the operating principles of the Autonomous Controller (static and dynamic configurations, State transition Table, etc.), refer to the corresponding chapter <a class="el" href="group__group__autanalog__ac.html">AC (Autonomous Controller)</a>.</dd></dl>
<h1><a class="anchor" id="group_autanalog_ctb_LNFE"></a>
LNFE (BJT)</h1>
<p>The CTB contains a pair of LNFEs (one for each Opamp), which is an NPN transistor that acts as a bootstrapping element to reduce the Opamp input-referred noise. The base and emitter connections of each LNFE are configurable in the switch routing matrix. For the configuration settings, see <a class="el" href="group__group__autanalog__ctb__enums.html#ga980cf26536473cbe55d392d7e25b3812">cy_en_autanalog_ctb_oa_inv_pin_t</a> and <a class="el" href="group__group__autanalog__ctb__enums.html#gaab47d63321b4e1a20562e86f6c12aaea">cy_en_autanalog_ctb_oa_mux_out_t</a>.</p>
<h1><a class="anchor" id="group_autanalog_ctb_pump"></a>
Opamp Input and Output Ranges</h1>
<p>The input range of the Opamp can be rail-to-rail if the charge pump is enabled. Without the charge pump, the input range is 0 V to VDDA - 1.5 V. The output range of the Opamp is typically 0.2 V to VDDA - 1.0 V and will depend on the load. See the device datasheet for more details.</p>
<table class="doxtable">
<tr>
<th>Charge Pump </th><th>Input Range </th><th>Output Range  </th></tr>
<tr>
<td>Enabled </td><td>0 V to VDDA </td><td>0.2 V to VDDA - 0.2 V  </td></tr>
<tr>
<td>Disabled </td><td>0 V to VDDA - 1.5 V </td><td>0.2 V to VDDA - 1.0 V  </td></tr>
</table>
<p>For the configuration settings, see <a class="el" href="group__group__autanalog__ctb__enums.html#ga03e6ba324bf537bae2d92715ddbb1cff">cy_en_autanalog_ctb_oa_pwr_t</a>.</p>
<h1><a class="anchor" id="group_autanalog_ctb_caps"></a>
Opamp compensation</h1>
<p>The Opamp stability is affected by the phase delay caused by the resistance in the Opmap feedback and parasitic capacitance at the Opamp input. Therefore, a 4-bit programmable compensation capacitor block is added in parallel with the resistor in the Opmap feedback to optimize the stability of the Opamp performance. For the configuration settings, see <a class="el" href="group__group__autanalog__ctb__enums.html#ga3c812643b21b1f8ecdef58a46d722d0b">cy_en_autanalog_ctb_oa_fb_cap_t</a> and <a class="el" href="group__group__autanalog__ctb__enums.html#ga4554940afbc1e459cec0a4bc301d70a1">cy_en_autanalog_ctb_oa_cc_cap_t</a>. </p><dl class="section note"><dt>Note</dt><dd>Use the Autonomous Analog Configurator to define the actual capacitance value required for a particular configuration.</dd></dl>
<h1><a class="anchor" id="group_autanalog_ctb_sample1"></a>
Sample use case: PGA and Comparator</h1>
<div class="image">
<img src="LPPASS_CTB_PGA_Comp.png" alt="LPPASS_CTB_PGA_Comp.png"/>
</div>
<div class="fragment"><div class="line"></div><div class="line"><span class="comment">/* Define the index for CTB0 instance within the Autonomous Analog */</span></div><div class="line"><span class="preprocessor">#define CTB0IDX                                                (0U)</span></div><div class="line"><span class="comment">/* Define the index for CTB1 instance within the Autonomous Analog */</span></div><div class="line"><span class="preprocessor">#define CTB1IDX                                                (1U)</span></div><div class="line"></div><div class="line"><span class="comment">/* Define the index for Opamp0 within the CTB */</span></div><div class="line"><span class="preprocessor">#define OPAMP0IDX                                              (0U)</span></div><div class="line"><span class="comment">/* Define the index for Opamp1 within the CTB */</span></div><div class="line"><span class="preprocessor">#define OPAMP1IDX                                              (1U)</span></div><div class="line"></div></div><!-- fragment --> <div class="fragment"><div class="line"></div><div class="line"><span class="comment">/* Scenario 1:</span></div><div class="line"><span class="comment">* CTB0 configured to operate in Ultra-low power mode</span></div><div class="line"><span class="comment">* - Opamp0: Inverting the ground-referenced PGA with gain setting 15.00. The charge pump is enabled.</span></div><div class="line"><span class="comment">* - Opamp1: Comparator with hysteresis;</span></div><div class="line"><span class="comment">* Note: The values for the FB and CC capacitors are given only as examples.</span></div><div class="line"><span class="comment">* Use the Autonomous Analog Configurator to define the actual capacitance value required for particular configuration.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="comment">/* The static part of the configuration for the CTB0 */</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="structcy__stc__autanalog__ctb__sta__t.html">cy_stc_autanalog_ctb_sta_t</a> ctb0StaticCfgPGA =</div><div class="line">{</div><div class="line">    <span class="comment">/* CTB0, Opamp0 */</span></div><div class="line">    .<a class="code" href="structcy__stc__autanalog__ctb__sta__t.html#ac303769e513ec9388c05442cbdf7b971">pwrOpamp0</a>        = <a class="code" href="group__group__autanalog__ctb__enums.html#gga03e6ba324bf537bae2d92715ddbb1cffaf412d18f1903787b815df0522c0a6d09">CY_AUTANALOG_CTB_OA_PWR_ULTRA_LOW_RAIL</a>,</div><div class="line">    .topologyOpamp0   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga49b625386d1c4e2e2f7c650d23e90ebaab77a2d17d3339676c72db8e887168044">CY_AUTANALOG_CTB_OA_TOPO_PGA</a>,</div><div class="line">    .intComp0         = <a class="code" href="group__group__autanalog__ctb__enums.html#gga3a44a5a02aea1371a1ae0b7afedff03ea52dcf4d3a7eb10151d6ee29e5f51c012">CY_AUTANALOG_CTB_COMP_INT_EDGE_DISABLED</a>,</div><div class="line">    .capCcOpamp0      = <a class="code" href="group__group__autanalog__ctb__enums.html#gga4554940afbc1e459cec0a4bc301d70a1a8463392725708c06a72b3dcfb3bc24a5">CY_AUTANALOG_CTB_OA_CC_CAP_2_1_pF</a>,</div><div class="line">    .capFbOpamp0      = <a class="code" href="group__group__autanalog__ctb__enums.html#gga3c812643b21b1f8ecdef58a46d722d0ba9dd136bcf61171f7b5952a88117ab870">CY_AUTANALOG_CTB_OA_FB_CAP_3_5_pF</a>,</div><div class="line"></div><div class="line">    <span class="comment">/* CTB0, Opamp1 */</span></div><div class="line">    .pwrOpamp1        = <a class="code" href="group__group__autanalog__ctb__enums.html#gga03e6ba324bf537bae2d92715ddbb1cffaf412d18f1903787b815df0522c0a6d09">CY_AUTANALOG_CTB_OA_PWR_ULTRA_LOW_RAIL</a>,</div><div class="line">    .topologyOpamp1   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga49b625386d1c4e2e2f7c650d23e90ebaaebe77c7a69f088a21225b33e8ef14b2f">CY_AUTANALOG_CTB_OA_TOPO_HYST_COMPARATOR</a>,</div><div class="line">    .intComp1         = <a class="code" href="group__group__autanalog__ctb__enums.html#gga3a44a5a02aea1371a1ae0b7afedff03eab1543f16598a58e41783cfcaeaef935e">CY_AUTANALOG_CTB_COMP_INT_EDGE_BOTH</a>,</div><div class="line">    .capCcOpamp1      = <a class="code" href="group__group__autanalog__ctb__enums.html#gga4554940afbc1e459cec0a4bc301d70a1aac316b15aebe891593e75183faf7b40f">CY_AUTANALOG_CTB_OA_CC_CAP_0_1_pF</a>,</div><div class="line">    .capFbOpamp1      = <a class="code" href="group__group__autanalog__ctb__enums.html#gga3c812643b21b1f8ecdef58a46d722d0ba4a0f689fafaacd02315b92e7d696100e">CY_AUTANALOG_CTB_OA_FB_CAP_0_pF</a>,</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* The dynamic part of the configuration for the CTB0 */</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="structcy__stc__autanalog__ctb__dyn__t.html">cy_stc_autanalog_ctb_dyn_t</a> ctb0DynamicCfgPGA[] =</div><div class="line">{</div><div class="line">    <span class="comment">/* CTB0, Opamp0 */</span></div><div class="line">    {</div><div class="line">        .<a class="code" href="structcy__stc__autanalog__ctb__dyn__t.html#ac2f63d5d5dd6ce1b888bd7befcb28358">ninvInpPin</a>   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga058fbfc32867e9623f22aced247b893faf2f4211103a98c6a9afeea3ed9c7b26a">CY_AUTANALOG_CTB_OA_NINV_PIN_OA0_P0_OA1_P5</a>,</div><div class="line">        .ninvInpRef   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga6763a149d899bba38ef2db031f0faa6da3afc18bb5a2df915d8b71402db4d9402">CY_AUTANALOG_CTB_OA_NINV_REF_DISCONNECT</a>,</div><div class="line">        .invInpPin    = <a class="code" href="group__group__autanalog__ctb__enums.html#gga980cf26536473cbe55d392d7e25b3812a095ef4e1c998065c5d40d1d8248fda22">CY_AUTANALOG_CTB_OA_INV_PIN_DISCONNECT</a>,</div><div class="line">        .resInpPin    = <a class="code" href="group__group__autanalog__ctb__enums.html#gga1db3ea7a6cfccc052999d1245d1af902a47b8868d6c327807ca6b238143c99ae1">CY_AUTANALOG_CTB_OA_RES_PIN_OA0_P1_OA1_P4</a>,</div><div class="line">        .resInpRef    = <a class="code" href="group__group__autanalog__ctb__enums.html#ggaf0146a705dd5ee08162550390fb84cb3a74679e392121b46f10683147e81eaaa6">CY_AUTANALOG_CTB_OA_RES_REF_DISCONNECT</a>,</div><div class="line">        .sharedMuxIn  = <a class="code" href="group__group__autanalog__ctb__enums.html#gga25de3d7215e06e49794c6aa90e8874a9ae71d1fa76e4d5cced87acc23597490d8">CY_AUTANALOG_CTB_OA_MUX_IN_DISCONNECT</a>,</div><div class="line">        .sharedMuxOut = <a class="code" href="group__group__autanalog__ctb__enums.html#ggaab47d63321b4e1a20562e86f6c12aaeaae70326f47eab450b465ef9d9e97dcaa7">CY_AUTANALOG_CTB_OA_MUX_OUT_DISCONNECT</a>,</div><div class="line">        .outToPin     = <span class="keyword">true</span>,</div><div class="line">    },</div><div class="line"></div><div class="line">    <span class="comment">/* CTB0, Opamp1 */</span></div><div class="line">    {</div><div class="line">        .ninvInpPin   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga058fbfc32867e9623f22aced247b893fab23089bd45fb99dc259e0071a877a8be">CY_AUTANALOG_CTB_OA_NINV_PIN_DISCONNECT</a>,</div><div class="line">        .ninvInpRef   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga6763a149d899bba38ef2db031f0faa6dad7869a56258e46a153a4ec08dda449c9">CY_AUTANALOG_CTB_OA_NINV_REF_VREF2</a>,</div><div class="line">        .invInpPin    = <a class="code" href="group__group__autanalog__ctb__enums.html#gga980cf26536473cbe55d392d7e25b3812a647e68a1f0a1eea7dec437b5747f07f4">CY_AUTANALOG_CTB_OA_INV_PIN_OA0_P1_OA1_P4</a>,</div><div class="line">        .resInpPin    = <a class="code" href="group__group__autanalog__ctb__enums.html#gga1db3ea7a6cfccc052999d1245d1af902a73ee7b83f5d27d305270f5bc10459136">CY_AUTANALOG_CTB_OA_RES_PIN_DISCONNECT</a>,</div><div class="line">        .resInpRef    = <a class="code" href="group__group__autanalog__ctb__enums.html#ggaf0146a705dd5ee08162550390fb84cb3a74679e392121b46f10683147e81eaaa6">CY_AUTANALOG_CTB_OA_RES_REF_DISCONNECT</a>,</div><div class="line">        .sharedMuxIn  = <a class="code" href="group__group__autanalog__ctb__enums.html#gga25de3d7215e06e49794c6aa90e8874a9ae71d1fa76e4d5cced87acc23597490d8">CY_AUTANALOG_CTB_OA_MUX_IN_DISCONNECT</a>,</div><div class="line">        .sharedMuxOut = <a class="code" href="group__group__autanalog__ctb__enums.html#ggaab47d63321b4e1a20562e86f6c12aaeaae70326f47eab450b465ef9d9e97dcaa7">CY_AUTANALOG_CTB_OA_MUX_OUT_DISCONNECT</a>,</div><div class="line">        .outToPin     = <span class="keyword">true</span>,</div><div class="line">    },</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* Total configuration for the CTB0 */</span></div><div class="line"><a class="code" href="structcy__stc__autanalog__ctb__t.html">cy_stc_autanalog_ctb_t</a> ctb0CfgPGA =</div><div class="line">{</div><div class="line">    .<a class="code" href="structcy__stc__autanalog__ctb__t.html#a1bea47084f706236734e0b1a3f52a00d">ctbStaCfg</a>    = &amp;ctb0StaticCfgPGA,</div><div class="line">    .ctbDynCfgNum = <span class="keyword">sizeof</span>(ctb0DynamicCfgPGA) / <span class="keyword">sizeof</span>(ctb0DynamicCfgPGA[0U]),</div><div class="line">    .ctbDynCfgArr = ctb0DynamicCfgPGA,</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* The State Transition Table configuration for the CTB0 */</span></div><div class="line"><a class="code" href="structcy__stc__autanalog__stt__ctb__t.html">cy_stc_autanalog_stt_ctb_t</a> ctb0TtPGA[] =</div><div class="line">{</div><div class="line">    <span class="comment">/* The single state configuration in the State Transition Table */</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Enable the configuration for state #0 */</span></div><div class="line">        .<a class="code" href="structcy__stc__autanalog__stt__ctb__t.html#a4240327dbc8390347fca25b8094329b4">unlock</a> = <span class="keyword">true</span>,</div><div class="line"></div><div class="line">        <span class="comment">/* CTB0, Opamp0 */</span></div><div class="line">        .enableOpamp0 = <span class="keyword">true</span>,</div><div class="line">        .cfgOpamp0    = OPAMP0IDX,</div><div class="line">        .gainOpamp0   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga8e5ec22e475d65ff6fb8f1c66013316ea6207c94cd0453b14909fd498cf64cd7e">CY_AUTANALOG_STT_CTB_OA_GAIN_16_00</a>,</div><div class="line"></div><div class="line">        <span class="comment">/* CTB0, Opamp1 */</span></div><div class="line">        .enableOpamp1 = <span class="keyword">true</span>,</div><div class="line">        .cfgOpamp1    = OPAMP1IDX,</div><div class="line">        .gainOpamp1   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga8e5ec22e475d65ff6fb8f1c66013316ea1cf8cf0739d5439243abe523b3b2bf81">CY_AUTANALOG_STT_CTB_OA_GAIN_1_00</a>,</div><div class="line">    },</div><div class="line">};</div><div class="line"></div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The configuration must be done only under the AC in High Speed mode, when <a class="el" href="structcy__stc__autanalog__stt__ac__t.html#ad8b755e2429d3d4f210b2571afe56950">cy_stc_autanalog_stt_ac_t::lpMode</a> is equal to FALSE.</dd></dl>
<div class="fragment"><div class="line"></div><div class="line">    <a class="code" href="group__group__autanalog__enums.html#ga720c4a47874d251fb7e46aff083507e7">cy_en_autanalog_status_t</a> status;</div><div class="line"></div></div><!-- fragment --> <div class="fragment"><div class="line"></div><div class="line">    status = <a class="code" href="group__group__autanalog__ctb__functions__init.html#ga0461842d9bbc5d162351078ede88ca1e">Cy_AutAnalog_CTB_LoadConfig</a>(CTB0IDX, &amp;ctb0CfgPGA);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__group__autanalog__enums.html#gga720c4a47874d251fb7e46aff083507e7ae5d7d4a174f8f9099b94ced1cc863143">CY_AUTANALOG_SUCCESS</a> != status)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Error handling */</span></div><div class="line">    }</div><div class="line"></div></div><!-- fragment --> <h1><a class="anchor" id="group_autanalog_ctb_sample2"></a>
Sample use case: TIA and Voltage follower</h1>
<div class="image">
<img src="LPPASS_CTB_TIA_Buff.png" alt="LPPASS_CTB_TIA_Buff.png"/>
</div>
<div class="fragment"><div class="line"></div><div class="line"><span class="comment">/* Define the index for CTB0 instance within the Autonomous Analog */</span></div><div class="line"><span class="preprocessor">#define CTB0IDX                                                (0U)</span></div><div class="line"><span class="comment">/* Define the index for CTB1 instance within the Autonomous Analog */</span></div><div class="line"><span class="preprocessor">#define CTB1IDX                                                (1U)</span></div><div class="line"></div><div class="line"><span class="comment">/* Define the index for Opamp0 within the CTB */</span></div><div class="line"><span class="preprocessor">#define OPAMP0IDX                                              (0U)</span></div><div class="line"><span class="comment">/* Define the index for Opamp1 within the CTB */</span></div><div class="line"><span class="preprocessor">#define OPAMP1IDX                                              (1U)</span></div><div class="line"></div></div><!-- fragment --> <div class="fragment"><div class="line"></div><div class="line"><span class="comment">/* Scenario 2:</span></div><div class="line"><span class="comment">* CTB1 configured to operate in Ultra-low power mode with the optical sensor;</span></div><div class="line"><span class="comment">* - Opamp0: TIA with LNFE and with the reference voltage derived from the PRB. The charge pump is not enabled.</span></div><div class="line"><span class="comment">* - Opamp1: Voltage follower;</span></div><div class="line"><span class="comment">* Note: The values for FB and CC capacitors are given only as examples.</span></div><div class="line"><span class="comment">* Use the Autonomous Analog Configurator to define the actual capacitance value required for particular configuration.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="comment">/* The static part of the configuration for CTB1 */</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="structcy__stc__autanalog__ctb__sta__t.html">cy_stc_autanalog_ctb_sta_t</a> ctb1StaticCfgTIA =</div><div class="line">{</div><div class="line">    <span class="comment">/* CTB1, Opamp0 */</span></div><div class="line">    .<a class="code" href="structcy__stc__autanalog__ctb__sta__t.html#ac303769e513ec9388c05442cbdf7b971">pwrOpamp0</a>        = <a class="code" href="group__group__autanalog__ctb__enums.html#gga03e6ba324bf537bae2d92715ddbb1cffaea70ed86c8d401beefad3f9004314e7a">CY_AUTANALOG_CTB_OA_PWR_ULTRA_LOW</a>,</div><div class="line">    .topologyOpamp0   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga49b625386d1c4e2e2f7c650d23e90ebaa1f5e04e8ada5ddb209dfb296590abc89">CY_AUTANALOG_CTB_OA_TOPO_TIA</a>,</div><div class="line">    .intComp0         = <a class="code" href="group__group__autanalog__ctb__enums.html#gga3a44a5a02aea1371a1ae0b7afedff03ea52dcf4d3a7eb10151d6ee29e5f51c012">CY_AUTANALOG_CTB_COMP_INT_EDGE_DISABLED</a>,</div><div class="line">    .capCcOpamp0      = <a class="code" href="group__group__autanalog__ctb__enums.html#gga4554940afbc1e459cec0a4bc301d70a1add7fb11041ed6e1b7c93e59693a6781e">CY_AUTANALOG_CTB_OA_CC_CAP_5_1_pF</a>,</div><div class="line">    .capFbOpamp0      = <a class="code" href="group__group__autanalog__ctb__enums.html#gga3c812643b21b1f8ecdef58a46d722d0ba8ab5c0775ff4f454463996ed186a50a9">CY_AUTANALOG_CTB_OA_FB_CAP_7_7_pF</a>,</div><div class="line"></div><div class="line">    <span class="comment">/* CTB1, Opamp1 */</span></div><div class="line">    .pwrOpamp1        = <a class="code" href="group__group__autanalog__ctb__enums.html#gga03e6ba324bf537bae2d92715ddbb1cffaea70ed86c8d401beefad3f9004314e7a">CY_AUTANALOG_CTB_OA_PWR_ULTRA_LOW</a>,</div><div class="line">    .topologyOpamp1   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga49b625386d1c4e2e2f7c650d23e90ebaa8cb2c88cb1216b3d419c3d3e6d2b9eb5">CY_AUTANALOG_CTB_OA_TOPO_BUFFER</a>,</div><div class="line">    .intComp1         = <a class="code" href="group__group__autanalog__ctb__enums.html#gga3a44a5a02aea1371a1ae0b7afedff03ea52dcf4d3a7eb10151d6ee29e5f51c012">CY_AUTANALOG_CTB_COMP_INT_EDGE_DISABLED</a>,</div><div class="line">    .capCcOpamp1      = <a class="code" href="group__group__autanalog__ctb__enums.html#gga4554940afbc1e459cec0a4bc301d70a1ad54756ad942541a24d2b46d14b0beb6c">CY_AUTANALOG_CTB_OA_CC_CAP_1_1_pF</a>,</div><div class="line">    .capFbOpamp1      = <a class="code" href="group__group__autanalog__ctb__enums.html#gga3c812643b21b1f8ecdef58a46d722d0ba4a0f689fafaacd02315b92e7d696100e">CY_AUTANALOG_CTB_OA_FB_CAP_0_pF</a>,</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* The dynamic part of the configuration for CTB1 */</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="structcy__stc__autanalog__ctb__dyn__t.html">cy_stc_autanalog_ctb_dyn_t</a> ctb1DynamicCfgTIA[] =</div><div class="line">{</div><div class="line">    <span class="comment">/* CTB1, Opamp0 */</span></div><div class="line">    {</div><div class="line">        .<a class="code" href="structcy__stc__autanalog__ctb__dyn__t.html#ac2f63d5d5dd6ce1b888bd7befcb28358">ninvInpPin</a>   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga058fbfc32867e9623f22aced247b893fab23089bd45fb99dc259e0071a877a8be">CY_AUTANALOG_CTB_OA_NINV_PIN_DISCONNECT</a>,</div><div class="line">        .ninvInpRef   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga6763a149d899bba38ef2db031f0faa6da2423c0a13b7b15e296276f3b33bd14d6">CY_AUTANALOG_CTB_OA_NINV_REF_VREF3</a>,</div><div class="line">        .invInpPin    = <a class="code" href="group__group__autanalog__ctb__enums.html#gga980cf26536473cbe55d392d7e25b3812aafc119a10c9affc4defd9490f0a09b1d">CY_AUTANALOG_CTB_OA_INV_PIN_BJT</a>,</div><div class="line">        .resInpPin    = <a class="code" href="group__group__autanalog__ctb__enums.html#gga1db3ea7a6cfccc052999d1245d1af902af2c53ad4b6e7e783ef4e6301526b5d20">CY_AUTANALOG_CTB_OA_RES_PIN_OA0_P0_OA1_P5</a>,</div><div class="line">        .resInpRef    = <a class="code" href="group__group__autanalog__ctb__enums.html#ggaf0146a705dd5ee08162550390fb84cb3a74679e392121b46f10683147e81eaaa6">CY_AUTANALOG_CTB_OA_RES_REF_DISCONNECT</a>,</div><div class="line">        .sharedMuxIn  = <a class="code" href="group__group__autanalog__ctb__enums.html#gga25de3d7215e06e49794c6aa90e8874a9ae71d1fa76e4d5cced87acc23597490d8">CY_AUTANALOG_CTB_OA_MUX_IN_DISCONNECT</a>,</div><div class="line">        .sharedMuxOut = <a class="code" href="group__group__autanalog__ctb__enums.html#ggaab47d63321b4e1a20562e86f6c12aaeaae70326f47eab450b465ef9d9e97dcaa7">CY_AUTANALOG_CTB_OA_MUX_OUT_DISCONNECT</a>,</div><div class="line">        .outToPin     = <span class="keyword">true</span>,</div><div class="line">    },</div><div class="line"></div><div class="line">    <span class="comment">/* CTB1, Opamp1 */</span></div><div class="line">    {</div><div class="line">        .ninvInpPin   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga058fbfc32867e9623f22aced247b893faf2f4211103a98c6a9afeea3ed9c7b26a">CY_AUTANALOG_CTB_OA_NINV_PIN_OA0_P0_OA1_P5</a>,</div><div class="line">        .ninvInpRef   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga6763a149d899bba38ef2db031f0faa6da3afc18bb5a2df915d8b71402db4d9402">CY_AUTANALOG_CTB_OA_NINV_REF_DISCONNECT</a>,</div><div class="line">        .invInpPin    = <a class="code" href="group__group__autanalog__ctb__enums.html#gga980cf26536473cbe55d392d7e25b3812a095ef4e1c998065c5d40d1d8248fda22">CY_AUTANALOG_CTB_OA_INV_PIN_DISCONNECT</a>,</div><div class="line">        .resInpPin    = <a class="code" href="group__group__autanalog__ctb__enums.html#gga1db3ea7a6cfccc052999d1245d1af902a73ee7b83f5d27d305270f5bc10459136">CY_AUTANALOG_CTB_OA_RES_PIN_DISCONNECT</a>,</div><div class="line">        .resInpRef    = <a class="code" href="group__group__autanalog__ctb__enums.html#ggaf0146a705dd5ee08162550390fb84cb3a74679e392121b46f10683147e81eaaa6">CY_AUTANALOG_CTB_OA_RES_REF_DISCONNECT</a>,</div><div class="line">        .sharedMuxIn  = <a class="code" href="group__group__autanalog__ctb__enums.html#gga25de3d7215e06e49794c6aa90e8874a9ae71d1fa76e4d5cced87acc23597490d8">CY_AUTANALOG_CTB_OA_MUX_IN_DISCONNECT</a>,</div><div class="line">        .sharedMuxOut = <a class="code" href="group__group__autanalog__ctb__enums.html#ggaab47d63321b4e1a20562e86f6c12aaeaae70326f47eab450b465ef9d9e97dcaa7">CY_AUTANALOG_CTB_OA_MUX_OUT_DISCONNECT</a>,</div><div class="line">        .outToPin     = <span class="keyword">true</span>,</div><div class="line">    },</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* The total configuration for CTB1 */</span></div><div class="line"><a class="code" href="structcy__stc__autanalog__ctb__t.html">cy_stc_autanalog_ctb_t</a> ctb1CfgTIA =</div><div class="line">{</div><div class="line">    .<a class="code" href="structcy__stc__autanalog__ctb__t.html#a1bea47084f706236734e0b1a3f52a00d">ctbStaCfg</a>    = &amp;ctb1StaticCfgTIA,</div><div class="line">    .ctbDynCfgNum = <span class="keyword">sizeof</span>(ctb1DynamicCfgTIA) / <span class="keyword">sizeof</span>(ctb1DynamicCfgTIA[0U]),</div><div class="line">    .ctbDynCfgArr = ctb1DynamicCfgTIA,</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* The State Transition Table configuration for CTB1 */</span></div><div class="line"><a class="code" href="structcy__stc__autanalog__stt__ctb__t.html">cy_stc_autanalog_stt_ctb_t</a> ctb1TtTIA[] =</div><div class="line">{</div><div class="line">    <span class="comment">/* The single state configuration in the State Transition Table */</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Enable the configuration for state #0 */</span></div><div class="line">        .<a class="code" href="structcy__stc__autanalog__stt__ctb__t.html#a4240327dbc8390347fca25b8094329b4">unlock</a> = <span class="keyword">true</span>,</div><div class="line"></div><div class="line">        <span class="comment">/* CTB1, Opamp0 */</span></div><div class="line">        .enableOpamp0 = <span class="keyword">true</span>,</div><div class="line">        .cfgOpamp0    = OPAMP0IDX,</div><div class="line">        .gainOpamp0   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga8e5ec22e475d65ff6fb8f1c66013316eac992cd121a358f664a561d383e8823f3">CY_AUTANALOG_STT_CTB_OA_GAIN_32_00</a>,</div><div class="line"></div><div class="line">        <span class="comment">/* CTB1, Opamp1 */</span></div><div class="line">        .enableOpamp1 = <span class="keyword">true</span>,</div><div class="line">        .cfgOpamp1    = OPAMP1IDX,</div><div class="line">        .gainOpamp1   = <a class="code" href="group__group__autanalog__ctb__enums.html#gga8e5ec22e475d65ff6fb8f1c66013316ea1cf8cf0739d5439243abe523b3b2bf81">CY_AUTANALOG_STT_CTB_OA_GAIN_1_00</a>,</div><div class="line">    },</div><div class="line">};</div><div class="line"></div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The configuration must only be done while the AC is in High Speed mode, when <a class="el" href="structcy__stc__autanalog__stt__ac__t.html#ad8b755e2429d3d4f210b2571afe56950">cy_stc_autanalog_stt_ac_t::lpMode</a> is equal to FALSE.</dd></dl>
<div class="fragment"><div class="line"></div><div class="line">    <a class="code" href="group__group__autanalog__enums.html#ga720c4a47874d251fb7e46aff083507e7">cy_en_autanalog_status_t</a> status;</div><div class="line"></div></div><!-- fragment --> <div class="fragment"><div class="line"></div><div class="line">    status = <a class="code" href="group__group__autanalog__ctb__functions__init.html#ga0461842d9bbc5d162351078ede88ca1e">Cy_AutAnalog_CTB_LoadConfig</a>(CTB1IDX, &amp;ctb1CfgTIA);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__group__autanalog__enums.html#gga720c4a47874d251fb7e46aff083507e7ae5d7d4a174f8f9099b94ced1cc863143">CY_AUTANALOG_SUCCESS</a> != status)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Error handling */</span></div><div class="line">    }</div><div class="line"></div></div><!-- fragment --><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__autanalog__ctb__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ctb__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ctb__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ctb__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ctb__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ctb__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ctb__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ctb__enums.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>MTB CAT1 Peripheral driver library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
