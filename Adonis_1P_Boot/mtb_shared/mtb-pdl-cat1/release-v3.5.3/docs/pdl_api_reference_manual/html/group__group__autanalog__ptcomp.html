<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MTB CAT1 Peripheral driver library: PTComp  (Programmable Threshold Comparator)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="IFXCYP_one-line.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MTB CAT1 Peripheral driver library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__autanalog__ptcomp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">PTComp (Programmable Threshold Comparator)<div class="ingroups"><a class="el" href="group__group__autanalog.html">AUTONOMOUS ANALOG (Autonomous Analog Block)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>This driver provides API functions to configure the PTComp subsystem of the Autonomous Analog. </p>
<p>The PTComp block provides a pair of comparators that are used to compare the voltage on one input to the reference on another input.</p>
<p>The diagram below shows the PTComp simplified internals.</p>
<p>For more information on the PTComp, refer to the device Architecture Technical Reference Manual (TRM).<br />
For the exact location of the pins, see the device datasheet.</p>
<div class="image">
<img src="LPPASS_PTC_general.png" alt="LPPASS_PTC_general.png"/>
</div>
<h1><a class="anchor" id="group_autanalog_ptc_static"></a>
Static Configuration</h1>
<p>The static configuration contains application-specific settings intended to remain static for any PTComp application. The Autonomous Controller (AC) will NOT change the static configuration during operation.</p>
<p>The static configuration of the Comp includes:</p><ul>
<li>Clock divider (used in LP mode only);</li>
<li>Power mode;</li>
<li>Interrupt mode;</li>
<li>Comp hysteresis;</li>
<li>PTComp post-processing configuration, refer to <a class="el" href="group__group__autanalog__ptcomp.html#group_autanalog_ptc_pp">Post-processing Configuration</a> section.</li>
</ul>
<p>For configuration settings, see <a class="el" href="structcy__stc__autanalog__ptcomp__comp__sta__t.html">cy_stc_autanalog_ptcomp_comp_sta_t</a> structure.</p>
<h1><a class="anchor" id="group_autanalog_ptc_dynamic"></a>
Dynamic Configuration</h1>
<p>The dynamic configuration structure includes the Comp settings, which can be modified by the Autonomous Controller (AC) during operation.</p>
<p>The Autonomous Controller is able to modify the following characteristics of the PTComp in runtime per settings provided in the State Transition Table:</p><ul>
<li>Enable/Disable Comp within the PTComp;</li>
<li>Change the connection of the Comp inputs;</li>
</ul>
<p>For configuration settings, see <a class="el" href="structcy__stc__autanalog__ptcomp__comp__dyn__t.html">cy_stc_autanalog_ptcomp_comp_dyn_t</a> and <a class="el" href="structcy__stc__autanalog__stt__ptcomp__t.html">cy_stc_autanalog_stt_ptcomp_t</a> structures.</p>
<h1><a class="anchor" id="group_autanalog_ptc_pp"></a>
Post-processing Configuration</h1>
<p>The PTComp contains two post-processing blocks that can be used to measure time between events and/or count events. The Comp state (level) or rising/falling change can be used as an input event for post-processing.</p>
<p>The PTComp post-processing can operate in the following modes (<a class="el" href="structcy__stc__autanalog__ptcomp__comp__pp__t.html#aa07c368ad058fe244a88230e266ede45">cy_stc_autanalog_ptcomp_comp_pp_t::cntMode</a>):</p><ul>
<li>DIRECT - the counter is configured to count the number of input events <a class="el" href="structcy__stc__autanalog__ptcomp__comp__pp__t.html#aaf3506a06b94c1ab1230deea704ce6e9" title="The post-processor input source. ">cy_stc_autanalog_ptcomp_comp_pp_t::inpSrc</a>. The condition is evaluated based on the <a class="el" href="group__group__autanalog__ptcomp__enums.html#ga5bdb206977b9d43504e916a64d69de23">cy_en_autanalog_ptcomp_pp_cond_t</a> every rising edge of the post-processing clock (refer to chapter <a class="el" href="group__group__autanalog__ptcomp.html#group_autanalog_ptc_clock">Clocking</a>). If the condition is met, the counter is reset.</li>
<li>FRAME - the counter is configured to count the number of input events <a class="el" href="structcy__stc__autanalog__ptcomp__comp__pp__t.html#aaf3506a06b94c1ab1230deea704ce6e9" title="The post-processor input source. ">cy_stc_autanalog_ptcomp_comp_pp_t::inpSrc</a> that occur during a given frame. The frame rate is determined by <a class="el" href="structcy__stc__autanalog__ptcomp__comp__pp__t.html#a34505be3b94c63b68bd808f09c6fea0f" title="The frame period in number of clock cycles for PTComp. ">cy_stc_autanalog_ptcomp_comp_pp_t::period</a>. At the end of the frame, the condition is evaluated based on the <a class="el" href="group__group__autanalog__ptcomp__enums.html#ga5bdb206977b9d43504e916a64d69de23">cy_en_autanalog_ptcomp_pp_cond_t</a> and the counter is reset to begin the next frame.</li>
<li>WINDOW - the counter is configured to count the number of input events <a class="el" href="structcy__stc__autanalog__ptcomp__comp__pp__t.html#aaf3506a06b94c1ab1230deea704ce6e9" title="The post-processor input source. ">cy_stc_autanalog_ptcomp_comp_pp_t::inpSrc</a> that occur inside a given window. The window size is set by <a class="el" href="structcy__stc__autanalog__ptcomp__comp__pp__t.html#a93fcaca0fa439a873cfb8dabad1223a3" title="The window size for post-processing mode WINDOW. ">cy_stc_autanalog_ptcomp_comp_pp_t::windowSize</a>. After filling the window, the condition is evaluated based on the <a class="el" href="group__group__autanalog__ptcomp__enums.html#ga5bdb206977b9d43504e916a64d69de23">cy_en_autanalog_ptcomp_pp_cond_t</a> every rising edge of the post processor clock. The counter is not reset in this mode.</li>
</ul>
<p>The post-processing result of each Comp can be combined together using the dual-input look-up table block. This block implements a set of Boolean functions <a class="el" href="structcy__stc__autanalog__ptcomp__comp__pp__t.html#ad7a1bd68ff68708750596d772aa40d17">cy_stc_autanalog_ptcomp_comp_pp_t::dataFunction</a> and allows a common functional logic to be defined for a pair of Comps.</p>
<h1><a class="anchor" id="group_autanalog_ptc_clock"></a>
Clocking</h1>
<p>The PTComp is clocked from the SRSS peripheral clock (Clk_HF9, up to 80MHz, refer to <a class="el" href="group__group__autanalog.html#group_autanalog_section_configuration">General Configuration Considerations</a>) in chip Active mode, using Peri 0 Clock Group 2 8-bit divider in the clock chain.<br />
Or from the local Low Power Oscillator (LPOSC, 4096kHz, refer to <a class="el" href="group__group__autanalog__ac__enums.html#gaf11e8757f7961367bb1b18a5eeca13ca">cy_en_autanalog_timer_clk_src_t</a>) in chip Deep Sleep mode. The clock value can be adjusted using dedicated divider <a class="el" href="structcy__stc__autanalog__ptcomp__comp__sta__t.html#ac77226fdada7bda33bd279924430d858" title="The Low Power clock divider, actual divide value is DIV_VAL + 1, valid range is 1...1024. ">cy_stc_autanalog_ptcomp_comp_sta_t::lpDivPtcomp</a>.</p>
<h1><a class="anchor" id="group_autanalog_ptc_int"></a>
Interrupts, Triggers and STT Events</h1>
<p>The following internal events of the PTComp can be configured to generate an interrupt or trigger or used as the STT event in the Autonomous Analog (refer to <a class="el" href="group__group__autanalog__ac__enums.html#ga768fe80c98ba584dd74ba62278d57b31">cy_en_autanalog_ac_out_trigger_mask_t</a> and <a class="el" href="group__group__autanalog__ac__enums.html#ga07c8c6d1282fb7e5b1f4e4425af6d9d2">cy_en_autanalog_stt_ac_condition_t</a>):</p><ul>
<li>PTCOMP_CMPx - Indicates Comp output event;</li>
<li>PTCOMP_RANGEx - Indicates range detection conditions;</li>
<li>PTCOMP_STROBEx (STT event only) - Indicates finish of post-processing iteration and readiness range conditions for evaluation (refer to <a class="el" href="group__group__autanalog__ptcomp.html#group_autanalog_ptc_pp">Post-processing Configuration</a> chapter); </li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__autanalog__ptcomp__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ptcomp__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ptcomp__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ptcomp__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ptcomp__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ptcomp__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ptcomp__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ptcomp__enums.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>MTB CAT1 Peripheral driver library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
