<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MTB CAT1 Peripheral driver library: AC      (Autonomous Controller)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="IFXCYP_one-line.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MTB CAT1 Peripheral driver library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__autanalog__ac.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">AC (Autonomous Controller)<div class="ingroups"><a class="el" href="group__group__autanalog.html">AUTONOMOUS ANALOG (Autonomous Analog Block)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>This driver provides API functions to configure the Autonomous Controller (AC) subsystem within the Autonomous Analog. </p>
<p>The AC controls the entire operation of the Autonomous Analog. This includes enabling/disabling analog blocks, configuring them using the dynamic part of the configuration, checking state/status and handling events by taking conditional actions, managing intermediate data and notifying the host MCU/peripheral using interrupts/triggers.</p>
<p>For more information on the AC, refer to the device Architecture Technical Reference Manual (TRM).<br />
For the exact location of the digital outputs pins, see the device datasheet.</p>
<h1><a class="anchor" id="group_autanalog_ac_stt"></a>
State Transition Table</h1>
<p>The AC FSM is based on a sequencer that can operate in all power modes except Hibernate. The set of operating states for this sequencer is named the State Transition Table (STT). The total number of the states in the STT is 64.</p>
<p>In each state of the STT, the AC interacts with other subsystems of the Autonomous Analog via a standard interface (see <a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_interface">AC Interface</a> chapter). This interaction includes receiving the subsystem status and issuing the appropriate action (if any), see <a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_cond_act">AC Conditions and Actions</a> chapter.</p>
<p>The AC can change the STT state sequentially or take branch conditionally, depending on events from the subsystems of the Autonomous Analog.</p>
<h2><a class="anchor" id="group_autanalog_ac_interface"></a>
AC Interface</h2>
<p>The AC has a standard interface for each sub-system of the Autonomous Analog:</p><ul>
<li>Enable sub-system (used to enable/disable, gate resets/clocks, and power analog macros)<br />
 e.g. <a class="el" href="structcy__stc__autanalog__stt__ctb__t.html#a7acf372d44f10bbc884f6eb43de19dd0">cy_stc_autanalog_stt_ctb_t::enableOpamp0</a> for the CTB;</li>
<li>Static Configuration Selection for channel selection (to sub-systems like the ADC and DAC)<br />
 e.g. <a class="el" href="structcy__stc__autanalog__stt__dac__t.html#ade470a1fea2822c26b60eadcea309053">cy_stc_autanalog_stt_dac_t::channel</a> for the DAC;</li>
<li>Dynamic Configuration Selection for routing and/or gain (for sub-systems like the PTComp and CTB)<br />
 e.g. <a class="el" href="structcy__stc__autanalog__stt__ptcomp__t.html#abf284ac86243e86591edb413e8b451ad">cy_stc_autanalog_stt_ptcomp_t::dynCfgIdxComp0</a>;</li>
<li>Condition(s) (varies per sub-system) e.g. <a class="el" href="group__group__autanalog__ac__enums.html#gga07c8c6d1282fb7e5b1f4e4425af6d9d2aa6026ea9c7834a173ef813df1c6e035c">cy_en_autanalog_stt_ac_condition_t::CY_AUTANALOG_STT_AC_CONDITION_SAR_DONE</a>;</li>
<li>Action Trigger(s) (internal triggers for the clocked sub-systems like the ADC and DAC) e.g. <a class="el" href="structcy__stc__autanalog__stt__sar__t.html#a5f7548119dea2ca78236ac678ec9fc20">cy_stc_autanalog_stt_sar_t::trigger</a>;</li>
</ul>
<p>The subsystems provide their interfaces for the AC in the <a class="el" href="structcy__stc__autanalog__stt__t.html">cy_stc_autanalog_stt_t</a> configuration structure. The complete STT configuration contains the total number of states used in the STT (<a class="el" href="structcy__stc__autanalog__t.html#a1b7a0f1bd01fe18c074ac7ba92264e66">cy_stc_autanalog_t::numSttEntries</a>) and a pointer to the array of configured interfaces of that size (<a class="el" href="structcy__stc__autanalog__t.html#a1df160b8b8232c89bfabaf72ce2e5fc9">cy_stc_autanalog_t::stateTransitionTable</a>).</p>
<h2><a class="anchor" id="group_autanalog_ac_cond_act"></a>
AC Conditions and Actions</h2>
<p>The CONDITION events (<a class="el" href="group__group__autanalog__ac__enums.html#ga07c8c6d1282fb7e5b1f4e4425af6d9d2">cy_en_autanalog_stt_ac_condition_t</a>) are statuses from the sub-systems of the Autonomous Analog for the AC that can be used to branch (<a class="el" href="group__group__autanalog__ac__enums.html#ga953523ea666a6bd7f2b47eb857c3ba8d">cy_en_autanalog_stt_ac_action_t</a>) the program execution (i.e. change the STT state) and/or triggering an appropriate action for the subsystem (e.g. <a class="el" href="structcy__stc__autanalog__stt__dac__t.html#af7c41484566370b872841dbfa8fdeec7" title="This field initiates the DAC operation per selected channel. ">cy_stc_autanalog_stt_dac_t::trigger</a>).</p>
<h1><a class="anchor" id="group_autanalog_ac_tc"></a>
AC Loop/Interval Counters</h1>
<p>The AC contains four Loop/Interval counters that are programmatically assigned to the STT states. These down counters are used by the AC to implement delays in a given STT state (interval) or loop constructions that may contain several STT states. The AC can support up to 4 loop counters, or up to 3 loop counters and 1 interval counter. The counters periods are programmed with <a class="el" href="structcy__stc__autanalog__stt__ac__t.html#aa84a17969695640e0c793062543a2b75">cy_stc_autanalog_stt_ac_t::count</a>. Every AC clock cycle (see <a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_clock">AC Clock</a> chapter), the counter value decrements. When the counter value reaches zero (terminal count), the counter asserts a CNT_DONE trigger that is read by the AC.</p>
<p>The current state of the Loop/Interval Counter represents <a class="el" href="structcy__stc__autanalog__state__tc__t.html">cy_stc_autanalog_state_tc_t</a> configuration structure.</p>
<h2><a class="anchor" id="group_autanalog_ac_lc"></a>
Loop Counters</h2>
<p>The loop counters are used for repeating certain STT states for a finite number of times. The user requests a Loop Counter by programming a particular STT state with the BRANCH_IF_* action and CNT_DONE condition.</p>
<h2><a class="anchor" id="group_autanalog_ac_ic"></a>
Interval Counter</h2>
<p>The interval counters are used for waiting in a particular STT state for a finite amount of time. The user requests an Interval Counter by programming a particular STT state with the WAIT_FOR action and CNT_DONE condition.</p>
<h1><a class="anchor" id="group_autanalog_ac_state"></a>
AC State</h1>
<p>The current AC state represents the <a class="el" href="structcy__stc__autanalog__state__ac__t.html">cy_stc_autanalog_state_ac_t</a> configuration structure.</p>
<h1><a class="anchor" id="group_autanalog_aa_state"></a>
Autonomous Analog State</h1>
<p>The current Autonomous Analog state represents the <a class="el" href="structcy__stc__autanalog__state__t.html">cy_stc_autanalog_state_t</a> configuration structure.</p>
<h1><a class="anchor" id="group_autanalog_ac_mode"></a>
High Speed and Low Power operation</h1>
<p>The AC is available in both High Speed (HS) and Low Power (LP) modes. The operational mode of the AC determines the actual operation mode for the entire Autonomous Analog block (see <a class="el" href="structcy__stc__autanalog__stt__ac__t.html#ad8b755e2429d3d4f210b2571afe56950">cy_stc_autanalog_stt_ac_t::lpMode</a>).</p>
<h1><a class="anchor" id="group_autanalog_ac_clock"></a>
AC Clock</h1>
<p>In HS mode, the AC is clocked from CLK_HF9 directly (80MHz max) and functions only in chip Active mode.<br />
In LP mode, the AC is clocked from CLK_LPOSC (4.096MHz nominal) and functions in chip Active and Deep Sleep modes.</p>
<h1><a class="anchor" id="group_autanalog_ac_pm"></a>
Power Management</h1>
<p>In LP mode, the AC uses a dedicated logic for the Autonomous Analog digital logic duty cycling and minimizing both switching and leakage currents.</p>
<h2><a class="anchor" id="group_autanalog_ac_dc"></a>
Duty Cycling</h2>
<p>The AC requests a duty cycling event based on the programming of the ACTION and CONDITION (<a class="el" href="group__group__autanalog__ac__enums.html#ga953523ea666a6bd7f2b47eb857c3ba8d">cy_en_autanalog_stt_ac_action_t</a> and <a class="el" href="group__group__autanalog__ac__enums.html#ga07c8c6d1282fb7e5b1f4e4425af6d9d2">cy_en_autanalog_stt_ac_condition_t</a>). Whenever the AC state is programmed with WAIT_FOR action and *_WAKEUP condition, a sleep request is sent to the duty cycle FSM.</p>
<p>For configuration settings, see the <a class="el" href="structcy__stc__autanalog__stt__t.html">cy_stc_autanalog_stt_t</a> configuration structure and refer to <a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_stt">State Transition Table</a> chapter for more information.</p>
<h2><a class="anchor" id="group_autanalog_ac_wakeup"></a>
Wake-up Events and Wake-up Timer</h2>
<p>The duty cycling FSM supports several different wake-up sources:</p><ul>
<li>Wake-up Timer;</li>
<li>See the rest of *_WAKEUP conditions in <a class="el" href="group__group__autanalog__ac__enums.html#ga07c8c6d1282fb7e5b1f4e4425af6d9d2">cy_en_autanalog_stt_ac_condition_t</a>;</li>
</ul>
<p>The wake-up Timer can be clocked from the 32kHz low frequency clock (CLK_LF) or (at the expense of additional switching current) the 4.096MHz low power oscillator (CLK_LPOSC).</p>
<p>For configuration settings, see the <a class="el" href="structcy__stc__autanalog__timer__t.html">cy_stc_autanalog_timer_t</a> configuration structure.</p>
<h1><a class="anchor" id="group_autanalog_ac_cfg"></a>
AC Configuration</h1>
<p>The AC configuration includes:</p><ul>
<li>Wake-up timer (<a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_wakeup">Wake-up Events and Wake-up Timer</a> chapter);</li>
<li>Enable the control a set of digital outputs (<a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_dout">AC Digital Outputs</a> chapter);</li>
<li>The set of masks to control output triggers (<a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_trigg">External Triggers</a> chapter);</li>
</ul>
<p>For configuration settings, see the <a class="el" href="structcy__stc__autanalog__ac__t.html">cy_stc_autanalog_ac_t</a> configuration structure.</p>
<h1><a class="anchor" id="group_autanalog_ac_dout"></a>
AC Digital Outputs</h1>
<p>Four GPIOs can be directly controlled by the AC (<a class="el" href="structcy__stc__autanalog__stt__ac__t.html#aec824ce95d5195a369cbf316f0aac751">cy_stc_autanalog_stt_ac_t::gpioOut</a>) in runtime. Before using this option, they must be enabled in the AC configuration (<a class="el" href="structcy__stc__autanalog__ac__t.html#a9da5a62f6abb8f88f60e19e8ac451837">cy_stc_autanalog_ac_t::gpioOutEn</a>) and unlocked for a given state in the State Transition Table (<a class="el" href="structcy__stc__autanalog__stt__ac__t.html#a17e148a154f5d5d63089b8ff6e87aef7">cy_stc_autanalog_stt_ac_t::unlockGpioOut</a>). The digital waveforms are constructed based on the duration of a current state in the State Transition Table (<a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_stt">State Transition Table</a>) and the order of state execution.</p>
<p>For more details, refer to the <a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_cfg">AC Configuration</a> and <a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_stt">State Transition Table</a> chapters.</p>
<h1><a class="anchor" id="group_autanalog_ac_trigg"></a>
External Triggers</h1>
<p>The trigger is the method to start the activity in a given chip block without MCU intervention. The AC supports four (<a class="el" href="group__group__autanalog__ac__enums.html#ga3a0517333133998c460582293d843691">cy_en_autanalog_fw_trigger_t</a>) input triggers (firmware triggers) and eight (<a class="el" href="group__group__autanalog__ac__enums.html#ga8d95e8e0c2096212db0da444050bd92d">cy_en_autanalog_ac_out_trigger_idx_t</a>) output triggers.</p>
<h2><a class="anchor" id="group_autanalog_ac_fw_trigg"></a>
Firmware Triggers</h2>
<p>The AC can use the FW triggers as the CONDITIONS (*_TR_AUTANALOG_IN*, <a class="el" href="group__group__autanalog__ac__enums.html#ga07c8c6d1282fb7e5b1f4e4425af6d9d2">cy_en_autanalog_stt_ac_condition_t</a>) for the available ACTIONS (<a class="el" href="group__group__autanalog__ac__enums.html#ga953523ea666a6bd7f2b47eb857c3ba8d">cy_en_autanalog_stt_ac_action_t</a>).</p>
<p>For more details about the AC CONDITIONS and ACTIONS, refer to the <a class="el" href="group__group__autanalog__ac.html#group_autanalog_ac_cond_act">AC Conditions and Actions</a> chapter.</p>
<p>The FW trigger can be issued by means of the provided API, <a class="el" href="group__group__autanalog__ac__functions.html#gad4d2973708313fb58b5ed0e6e5863760">Cy_AutAnalog_FwTrigger</a>.</p>
<h2><a class="anchor" id="group_autanalog_ac_out_trigg"></a>
Output Triggers</h2>
<p>The output trigger can be initiated in response to an event within the Autonomous Analog. The set of such events is defined in <a class="el" href="group__group__autanalog__ac__enums.html#ga768fe80c98ba584dd74ba62278d57b31">cy_en_autanalog_ac_out_trigger_mask_t</a>. The required output triggers must be enabled in the AC configuration structure (<a class="el" href="structcy__stc__autanalog__ac__t.html#aa5ac2dad869e7225581747dc993f822f">cy_stc_autanalog_ac_t::mask</a>). Also, you can modify them at runtime using the provided API. <a class="el" href="group__group__autanalog__ac__functions.html#ga40e82b75e243db2eac3fae34c443cdf3">Cy_AutAnalog_GetOutputTriggerMask</a>, <a class="el" href="group__group__autanalog__ac__functions.html#ga7f177d684d2297c7db40aa98a438bd4c">Cy_AutAnalog_SetOutputTriggerMask</a>. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__autanalog__ac__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ac__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ac__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ac__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ac__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ac__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__autanalog__ac__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__autanalog__ac__enums.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>MTB CAT1 Peripheral driver library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
